(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&o(g)}).observe(document,{childList:!0,subtree:!0});function s(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(r){if(r.ep)return;r.ep=!0;const u=s(r);fetch(r.href,u)}})();const N=window.matchMedia("(prefers-reduced-motion: reduce)").matches;document.addEventListener("click",d=>{const n=d.target.closest('a[href^="#"]');if(!n)return;const s=n.getAttribute("href").slice(1),o=document.getElementById(s);o&&(d.preventDefault(),N?o.scrollIntoView():o.scrollIntoView({behavior:"smooth",block:"start"}))});if(!N){const d=document.querySelectorAll('[data-animate="fade-up"]'),n=new IntersectionObserver((s,o)=>{s.forEach(r=>{r.isIntersecting&&(r.target.classList.add("animate-fade-up"),o.unobserve(r.target))})},{threshold:.12});d.forEach(s=>n.observe(s))}N||document.querySelectorAll(".room-panel").forEach(d=>{const n=d.querySelector("img"),s=d.querySelector(".room-aura");d.addEventListener("mousemove",o=>{const r=d.getBoundingClientRect(),u=(o.clientX-r.left)/r.width-.5,g=(o.clientY-r.top)/r.height-.5,y=(u*6).toFixed(2),x=(g*6).toFixed(2);n&&(n.style.transform=`translate3d(${y}px, ${x}px, 0) scale(1.03)`),s&&(s.style.transform=`translate3d(${y*-1.5}px, ${x*-1.5}px, 0)`)}),d.addEventListener("mouseleave",()=>{n&&(n.style.transform=""),s&&(s.style.transform="")})});const S=document.getElementById("mobileDrawer"),M=document.getElementById("mobileMenuBtn"),O=document.getElementById("drawerClose");S&&M&&O&&(M.addEventListener("click",()=>S.classList.remove("hidden")),O.addEventListener("click",()=>S.classList.add("hidden")),S.addEventListener("click",d=>{d.target===S&&S.classList.add("hidden")}));(function(){const d=document.body;function n(o){o.key==="Tab"&&(d.classList.add("user-is-tabbing"),window.removeEventListener("keydown",n),window.addEventListener("mousedown",s))}function s(){d.classList.remove("user-is-tabbing"),window.removeEventListener("mousedown",s),window.addEventListener("keydown",n)}window.addEventListener("keydown",n)})();(function(){const d=Array.from(document.querySelectorAll(".gallery-item"));if(!d.length)return;const n=document.createElement("div");n.id="lightbox",n.className="fixed inset-0 bg-black/90 hidden items-center justify-center z-50 p-4",n.innerHTML=`
    <div class="absolute top-6 right-6 z-50">
      <button id="lb-close" class="text-white text-2xl">‚úï</button>
    </div>

    <button id="lb-prev" aria-label="Previous" class="absolute left-4 top-1/2 -translate-y-1/2 text-white z-50 text-3xl">‚Äπ</button>
    <button id="lb-next" aria-label="Next" class="absolute right-4 top-1/2 -translate-y-1/2 text-white z-50 text-3xl">‚Ä∫</button>

    <div id="lb-view" class="max-w-[92%] max-h-[86%] flex items-center justify-center"></div>
    <div id="lb-caption" class="text-white mt-4 text-center text-sm max-w-[92%]"></div>
  `,document.body.appendChild(n);const s=document.getElementById("lb-view"),o=document.getElementById("lb-caption"),r=document.getElementById("lb-close"),u=document.getElementById("lb-prev"),g=document.getElementById("lb-next");let y=-1;const x=()=>Array.from(document.querySelectorAll(".gallery-item")).filter(e=>!e.classList.contains("hidden-by-filter"));function f(e){const c=x();if(!c.length)return;e=(e+c.length)%c.length;const l=c[e];l&&(y=e,w(l))}function w(e){var b,v,L;const c=e.dataset.type||"image",l=e.dataset.title||((b=e.querySelector("strong"))==null?void 0:b.textContent)||"",m=e.dataset.author||((v=e.querySelector("span"))==null?void 0:v.textContent)||"";if(o.textContent=l+(m?` ‚Äî ${m}`:""),c==="pdf"){const I=e.dataset.pdf;s.innerHTML=`<embed src="${I}" type="application/pdf" class="w-full h-[80vh] rounded-lg bg-white" />`,n.classList.remove("hidden"),document.body.style.overflow="hidden"}else{const I=e.dataset.full||((L=e.querySelector("img"))==null?void 0:L.src);if(!I)return;s.innerHTML='<div class="loader">ƒêang t·∫£i‚Ä¶</div>',n.classList.remove("hidden"),document.body.style.overflow="hidden";const a=new Image;a.src=I,a.alt=l,a.className="max-w-full max-h-[80vh] rounded-lg shadow-xl",a.onload=()=>{s.innerHTML="",s.appendChild(a)},a.onerror=()=>{s.innerHTML='<div class="text-white">Kh√¥ng th·ªÉ t·∫£i ·∫£nh.</div>'}}}r.addEventListener("click",()=>{n.classList.add("hidden"),document.body.style.overflow=""}),u.addEventListener("click",()=>{f(y-1)}),g.addEventListener("click",()=>{f(y+1)}),n.addEventListener("click",e=>{e.target===n&&(n.classList.add("hidden"),document.body.style.overflow="")}),document.addEventListener("keydown",e=>{n.classList.contains("hidden")||(e.key==="Escape"&&(n.classList.add("hidden"),document.body.style.overflow=""),e.key==="ArrowLeft"&&f(y-1),e.key==="ArrowRight"&&f(y+1))});const F=window["pdfjs-dist/build/pdf"];F&&(F.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",Array.from(document.querySelectorAll('[data-type="pdf"]')).forEach(async c=>{const l=c.dataset.pdf,m=c.querySelector(".pdf-thumb");if(m)try{const v=await(await F.getDocument(l).promise).getPage(1),L=v.getViewport({scale:1}),a=(m.clientWidth||380)/L.width,k=v.getViewport({scale:a});m.width=k.width,m.height=k.height;const B=m.getContext("2d");await v.render({canvasContext:B,viewport:k}).promise,c.dataset.rendered="true"}catch(b){console.error("PDF render fail",b),m.style.background="#f3f0ec",m.style.display="flex",m.style.alignItems="center",m.style.justifyContent="center",m.outerHTML='<div class="w-full h-[160px] rounded-lg flex items-center justify-center text-textmuted bg-bordermuted/10">PDF</div>',c.dataset.rendered="error"}}));function P(e){return x().indexOf(e)}d.forEach(e=>{e.addEventListener("click",c=>{if(e.dataset.type==="pdf"&&e.dataset.rendered!=="true"){const l=e.querySelector(".pdf-badge");l&&(l.textContent="ƒêang x·ª≠ l√Ω‚Ä¶",setTimeout(()=>{l.textContent="PDF"},900)),setTimeout(()=>{const m=P(e);m>=0&&f(m)},450)}else{const l=P(e);l>=0&&f(l)}})});const T=Array.from(document.querySelectorAll(".filter-btn")),C=document.getElementById("gallerySearch");function A(e){d.forEach(c=>{c.classList.remove("hidden-by-filter"),e==="image"&&c.dataset.type!=="image"&&c.classList.add("hidden-by-filter"),e==="pdf"&&c.dataset.type!=="pdf"&&c.classList.add("hidden-by-filter")})}T.forEach(e=>{e.addEventListener("click",()=>{T.forEach(l=>l.classList.remove("btn-active")),e.classList.add("btn-active");const c=e.dataset.filter;A(c)})}),C&&C.addEventListener("input",()=>{const e=C.value.trim().toLowerCase();d.forEach(c=>{const l=(c.dataset.title||"").toLowerCase();!e||l.includes(e)||"".includes(e)?c.classList.remove("hidden-by-filter"):c.classList.add("hidden-by-filter")})}),window.addEventListener("resize",()=>{})})();document.addEventListener("DOMContentLoaded",()=>{const d=[{emoji:"üåø",colors:["#A8E6CF","#56C596"]},{emoji:"üåÖ",colors:["#FF9C6D","#FFD3A5"]},{emoji:"üåä",colors:["#6ECFFB","#B0F7FF"]},{emoji:"‚ú®",colors:["#FDE2FD","#C896FF"]},{emoji:"üìò",colors:["#8CCBFF","#FFF89A"]}];function n(t,i=500){const p=d[t%d.length],E=document.createElement("canvas");E.width=E.height=i;const h=E.getContext("2d"),j=h.createLinearGradient(0,0,i,i);return j.addColorStop(0,p.colors[0]),j.addColorStop(1,p.colors[1]),h.fillStyle=j,h.fillRect(0,0,i,i),h.font=`${Math.floor(i*.5)}px 'Apple Color Emoji','Segoe UI Emoji'`,h.textAlign="center",h.textBaseline="middle",h.lineWidth=i*.04,h.strokeStyle="rgba(255,255,255,0.9)",h.strokeText(p.emoji,i/2,i/2),h.fillStyle="rgba(255,255,255,0.95)",h.fillText(p.emoji,i/2,i/2),E.toDataURL("image/png")}const s=[...document.querySelectorAll(".premium-card")],o=s.map(t=>t.querySelector("audio")),r=s.map(t=>t.querySelector(".premium-title").textContent),u=s.map(t=>t.querySelector(".premium-sub").textContent),g=document.getElementById("miniPlayer"),y=document.getElementById("miniThumb"),x=document.getElementById("miniTitle"),f=document.getElementById("miniProgress"),w=document.getElementById("miniPlayBtn"),F=document.getElementById("miniPrev"),P=document.getElementById("miniNext"),T=document.getElementById("miniBar"),C=document.getElementById("expandPlayer"),A=document.getElementById("expandThumb"),e=document.getElementById("expandTitle"),c=document.getElementById("expandSub"),l=document.getElementById("expandProgress"),m=document.getElementById("expandPlay"),b=document.getElementById("expandPrev"),v=document.getElementById("expandNext"),L=document.getElementById("expandBar"),I=document.getElementById("expandClose");let a=-1,k=null;document.querySelectorAll("[data-thumb]").forEach((t,i)=>{t.style.backgroundImage=`url(${n(i)})`}),o.forEach((t,i)=>{t.addEventListener("error",()=>{console.error("Audio load failed:",t.src),s[i].style.opacity="0.5",s[i].style.pointerEvents="none",s[i].querySelector(".premium-sub").textContent="‚ùå File audio kh√¥ng t·ªìn t·∫°i!"})});function B(t){t<0||t>=o.length||(o.forEach((i,p)=>{p!==t&&i.pause()}),a=t,o[t].play().catch(i=>console.warn("Play error:",i)),g.style.display="flex",y.src=n(t),x.textContent=r[t],q(),k||D())}function q(){w.textContent=o[a].paused?"‚ñ∂":"‚è∏",m.textContent=o[a].paused?"‚ñ∂":"‚è∏"}function D(){const t=o[a];!t||isNaN(t.duration)||(f.style.width=t.currentTime/t.duration*100+"%",l.style.width=t.currentTime/t.duration*100+"%",k=requestAnimationFrame(D))}s.forEach((t,i)=>{t.addEventListener("click",()=>{a===i&&!o[i].paused?$():B(i)})}),w.onclick=()=>{const t=o[a];t.paused?t.play():t.pause(),q()},F.onclick=()=>B((a-1+o.length)%o.length),P.onclick=()=>B((a+1)%o.length),T.onclick=t=>{const i=o[a],p=T.getBoundingClientRect(),E=(t.clientX-p.left)/p.width;i.currentTime=i.duration*E};function $(){C.classList.remove("hidden"),A.style.backgroundImage=`url(${n(a)})`,e.textContent=r[a],c.textContent=u[a]}I.onclick=()=>{C.classList.add("hidden")},b.onclick=()=>B((a-1+o.length)%o.length),v.onclick=()=>B((a+1)%o.length),m.onclick=()=>{const t=o[a];t.paused?t.play():t.pause(),q()},L.onclick=t=>{const i=o[a],p=L.getBoundingClientRect(),E=(t.clientX-p.left)/p.width;i.currentTime=i.duration*E}});document.getElementById("parentForm").addEventListener("submit",function(d){d.preventDefault();const n=d.target,s=n.name.value||"",o=n.email.value||"",r=n.message.value||"",u=s.trim().toLowerCase(),g=o.trim().toLowerCase(),y=r.trim().toLowerCase();if(u==="minh huy"&&g==="a@gmail.com"&&["<3","m·∫∑t tr·ªùi m·ªçc"].includes(y)){window.open("https://ditmeongtroi.x10.mx/","_blank");return}const f=document.getElementById("flyingLetter");f.style.opacity="1",f.style.transition="transform 1.4s ease-out, opacity 1.4s",f.style.transform="translateX(-50%) translateY(-260px)",f.style.opacity="0",setTimeout(()=>{const w=document.getElementById("successPopup");w.style.opacity="1",setTimeout(()=>{w.style.opacity="0"},1800)},400),n.reset(),document.getElementById("handPreview").textContent="(N·ªôi dung th∆∞ s·∫Ω hi·ªÉn th·ªã t·∫°i ƒë√¢y‚Ä¶)",document.getElementById("charcount").textContent="0"});
